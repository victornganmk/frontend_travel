<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>React Responsive Navbar</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: sans-serif; }

    .navbar {
      position: fixed;
      top: 0; left: 0; right: 0;
      background: #222;
      color: #fff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 1rem;
      transition: transform 0.3s ease;
      z-index: 1000;
      height: 60px;
    }
    .navbar.hidden { transform: translateY(-100%); }
    .navbar .logo { font-size: 1.5rem; font-weight: bold; }

    .menu { display: flex; list-style: none; gap: 1.5rem; }
    .menu li { position: relative; cursor: pointer; }
    .menu li:hover .submenu { display: block; }

    .submenu {
      display: none;
      position: fixed;
      left: 0;
      top: 60px;
      width: 100vw;
      background: #333;
      padding: 2rem;
      color: #fff;
      z-index: 900;
    }

    .social { display: flex; gap: 1rem; }
    .social a { color: #fff; text-decoration: none; }

    .hamburger { display: none; flex-direction: column; gap: 5px; cursor: pointer; }
    .hamburger span {
      width: 25px; height: 3px; background: #fff;
    }

    .mobile-menu {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: #111;
      color: #fff;
      display: none;
      flex-direction: column;
      padding: 4rem 1rem 1rem;
      overflow-y: auto;
      z-index: 999;
    }
    .mobile-menu.show { display: flex; }
    .mobile-menu li {
      padding: 1rem 0;
      border-bottom: 1px solid #333;
      cursor: pointer;
    }
    .mobile-submenu {
      display: none;
      padding-left: 1rem;
      background: #222;
    }
    .mobile-submenu.show { display: block; }

    @media (max-width: 768px) {
      .menu, .social { display: none; }
      .hamburger { display: flex; }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    function Navbar() {
      const [showMobileMenu, setShowMobileMenu] = useState(false);
      const [activeSubmenu, setActiveSubmenu] = useState(null); // only one active
      const [hidden, setHidden] = useState(false);
      const lastScrollY = useRef(0);

      useEffect(() => {
        const handleScroll = () => {
          const currentY = window.scrollY;
          if (currentY > lastScrollY.current) {
            setHidden(true); 
          } else {
            setHidden(false); 
          }
          lastScrollY.current = currentY;
        };
        window.addEventListener("scroll", handleScroll);
        return () => window.removeEventListener("scroll", handleScroll);
      }, []);

      useEffect(() => {
        const handleResize = () => {
          if (window.innerWidth > 768) {
            setShowMobileMenu(false);
            setActiveSubmenu(null); // reset submenus
          }
        };
        window.addEventListener("resize", handleResize);
        return () => window.removeEventListener("resize", handleResize);
      }, []);

      const toggleSubmenu = (menu) => {
        setActiveSubmenu(prev => (prev === menu ? null : menu));
      };

      return (
        <>
          <nav className={`navbar ${hidden ? "hidden" : ""}`}>
            <div className="logo">MyLogo</div>
            
            <ul className="menu">
              <li>Home</li>
              <li>
                Services
                <div className="submenu">
                  <p>Mega menu content for Services</p>
                </div>
              </li>
              <li>
                Products
                <div className="submenu">
                  <p>Mega menu content for Products</p>
                </div>
              </li>
              <li>Contact</li>
            </ul>

            <div className="social">
              <a href="#">FB</a>
              <a href="#">TW</a>
              <a href="#">IG</a>
            </div>

            <div className="hamburger" onClick={() => setShowMobileMenu(!showMobileMenu)}>
              <span></span><span></span><span></span>
            </div>
          </nav>

          <div className={`mobile-menu ${showMobileMenu ? "show" : ""}`}>
            <li onClick={() => toggleSubmenu("home")}>Home</li>
            <li onClick={() => toggleSubmenu("services")}>
              Services
              <ul className={`mobile-submenu ${activeSubmenu === "services" ? "show" : ""}`}>
                <li>Web Design</li>
                <li>SEO</li>
                <li>Marketing</li>
              </ul>
            </li>
            <li onClick={() => toggleSubmenu("products")}>
              Products
              <ul className={`mobile-submenu ${activeSubmenu === "products" ? "show" : ""}`}>
                <li>App</li>
                <li>Software</li>
                <li>Tool</li>
              </ul>
            </li>
            <li>Contact</li>
          </div>
        </>
      );
    }

    function App() {
      return (
        <div>
          <Navbar />
          <main style={{marginTop: "80px", padding: "1rem"}}>
            <h1>Page Content</h1>
            <p>Scroll down to test the hide/show navbar behavior...</p>
            <div style={{height: "2000px"}}></div>
          </main>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>